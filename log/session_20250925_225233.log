2025-09-25 22:52:33,490 - INFO - Логирование настроено. Файл лога: log\session_20250925_225233.log
2025-09-25 22:52:33,491 - INFO - ТРАНСКРИПЦИЯ: Начало анализа файла: examples\ЛЮБОВЬ.mp3
2025-09-25 22:52:33,491 - DEBUG - ТРАНСКРИПЦИЯ: Использован промпт: Дай дословную ПОЛНУЮ транскрипцию без перевода и перефразирования. Сохраняй язык оригинала, не смешивай языки. Не интерпретируй смысл, не сокращай, не исправляй. Если часть неразборчива — оставь как есть или пропусти без домыслов. ВНИМАНИЕ: Если это музыка с повторяющимся припевом - распознай ВСЕ повторения. Если это плач ребенка или нечеловеческие звуки - НЕ придумывай слова, верни пустую строку.
2025-09-25 22:52:33,491 - DEBUG - ТРАНСКРИПЦИЯ: Попытка 1 - основной язык: ru
2025-09-25 22:52:34,522 - DEBUG - Request options: {'method': 'post', 'url': '/audio/transcriptions', 'headers': {'Content-Type': 'multipart/form-data'}, 'files': [('file', SerializationIterator(index=0, iterator=SerializationIterator(index=0, iterator=<_io.BufferedReader name='examples\\ЛЮБОВЬ.mp3'>)))], 'idempotency_key': 'stainless-python-retry-91ef3ad1-2f3c-4c3a-8816-7c8b62807d07', 'json_data': {'model': 'gpt-4o-transcribe', 'language': 'ru', 'prompt': 'Дай дословную ПОЛНУЮ транскрипцию без перевода и перефразирования. Сохраняй язык оригинала, не смешивай языки. Не интерпретируй смысл, не сокращай, не исправляй. Если часть неразборчива — оставь как есть или пропусти без домыслов. ВНИМАНИЕ: Если это музыка с повторяющимся припевом - распознай ВСЕ повторения. Если это плач ребенка или нечеловеческие звуки - НЕ придумывай слова, верни пустую строку.', 'response_format': 'text'}}
2025-09-25 22:52:34,661 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/audio/transcriptions
2025-09-25 22:52:34,661 - DEBUG - connect_tcp.started host='127.0.0.1' port=8888 local_address=None timeout=5.0 socket_options=None
2025-09-25 22:52:34,664 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022A54C774D0>
2025-09-25 22:52:34,664 - DEBUG - send_request_headers.started request=<Request [b'CONNECT']>
2025-09-25 22:52:34,665 - DEBUG - send_request_headers.complete
2025-09-25 22:52:34,665 - DEBUG - send_request_body.started request=<Request [b'CONNECT']>
2025-09-25 22:52:34,665 - DEBUG - send_request_body.complete
2025-09-25 22:52:34,665 - DEBUG - receive_response_headers.started request=<Request [b'CONNECT']>
2025-09-25 22:52:34,665 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'Connection established', [])
2025-09-25 22:52:34,666 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000022A54B85400> server_hostname='api.openai.com' timeout=5.0
2025-09-25 22:52:35,059 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022A54C7FED0>
2025-09-25 22:52:35,059 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-25 22:52:35,060 - DEBUG - send_request_headers.complete
2025-09-25 22:52:35,060 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-25 22:52:35,066 - DEBUG - send_request_body.complete
2025-09-25 22:52:35,067 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-25 22:52:39,158 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 25 Sep 2025 19:52:39 GMT'), (b'Content-Type', b'text/plain; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'yurisun'), (b'openai-processing-ms', b'939'), (b'openai-project', b'proj_Llb21yVk5b2whxj0ZTkY3iYI'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'951'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_e869d2f421fe4daeb87957cf71cd1b7b'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=ZFG_Gg3nFptkCv5C673L5_5CUcLg.1kkaIxtHvL01nM-1758829959-1.0.1.1-oIYasLWENv6avXpIH3SOeltv6Ns6OE__ulovA7nkPOZ82HGTA28fJnGp9QhAuYk._1pvL67fF0FHciExyQ.Y2oJo0VllHxwfMIyiHpJIVPQ; path=/; expires=Thu, 25-Sep-25 20:22:39 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=xDM7lyTb30MBlvASgQ3NE_YlPmZBe3uf_q4xh83hwJA-1758829959131-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'984d10137c7a8dc9-HEL'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-25 22:52:39,159 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-09-25 22:52:39,159 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-25 22:52:39,160 - DEBUG - receive_response_body.complete
2025-09-25 22:52:39,160 - DEBUG - response_closed.started
2025-09-25 22:52:39,160 - DEBUG - response_closed.complete
2025-09-25 22:52:39,160 - DEBUG - HTTP Response: POST https://api.openai.com/v1/audio/transcriptions "200 OK" Headers([('date', 'Thu, 25 Sep 2025 19:52:39 GMT'), ('content-type', 'text/plain; charset=utf-8'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'yurisun'), ('openai-processing-ms', '939'), ('openai-project', 'proj_Llb21yVk5b2whxj0ZTkY3iYI'), ('openai-version', '2020-10-01'), ('x-envoy-upstream-service-time', '951'), ('x-ratelimit-limit-requests', '500'), ('x-ratelimit-remaining-requests', '499'), ('x-ratelimit-reset-requests', '120ms'), ('x-request-id', 'req_e869d2f421fe4daeb87957cf71cd1b7b'), ('x-openai-proxy-wasm', 'v0.1'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=ZFG_Gg3nFptkCv5C673L5_5CUcLg.1kkaIxtHvL01nM-1758829959-1.0.1.1-oIYasLWENv6avXpIH3SOeltv6Ns6OE__ulovA7nkPOZ82HGTA28fJnGp9QhAuYk._1pvL67fF0FHciExyQ.Y2oJo0VllHxwfMIyiHpJIVPQ; path=/; expires=Thu, 25-Sep-25 20:22:39 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=xDM7lyTb30MBlvASgQ3NE_YlPmZBe3uf_q4xh83hwJA-1758829959131-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '984d10137c7a8dc9-HEL'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-09-25 22:52:39,161 - DEBUG - request_id: req_e869d2f421fe4daeb87957cf71cd1b7b
2025-09-25 22:52:39,161 - DEBUG - ФИЛЬТРАЦИЯ: Входной текст: 'Настрою, играет самолёт, мы группа названий люблю.'
2025-09-25 22:52:39,161 - DEBUG - ФИЛЬТРАЦИЯ: Промпт: 'Дай дословную ПОЛНУЮ транскрипцию без перевода и перефразирования. Сохраняй язык оригинала, не смешивай языки. Не интерпретируй смысл, не сокращай, не исправляй. Если часть неразборчива — оставь как есть или пропусти без домыслов. ВНИМАНИЕ: Если это музыка с повторяющимся припевом - распознай ВСЕ повторения. Если это плач ребенка или нечеловеческие звуки - НЕ придумывай слова, верни пустую строку.'
2025-09-25 22:52:39,162 - DEBUG - ФИЛЬТРАЦИЯ: Текст прошел фильтрацию: 'Настрою, играет самолёт, мы группа названий люблю.'
2025-09-25 22:52:39,162 - DEBUG - ТРАНСКРИПЦИЯ: Результат 1: 'Настрою, играет самолёт, мы группа названий люблю.' (длина: 50)
2025-09-25 22:52:39,162 - DEBUG - ТРАНСКРИПЦИЯ: Попытка 4 - музыкальный промпт
2025-09-25 22:52:39,163 - DEBUG - Request options: {'method': 'post', 'url': '/audio/transcriptions', 'headers': {'Content-Type': 'multipart/form-data'}, 'files': [('file', SerializationIterator(index=0, iterator=SerializationIterator(index=0, iterator=<_io.BufferedReader name='examples\\ЛЮБОВЬ.mp3'>)))], 'idempotency_key': 'stainless-python-retry-19c63a68-ef49-40d7-a8db-7e01ff04baef', 'json_data': {'model': 'gpt-4o-transcribe', 'prompt': 'Это музыкальная композиция с вокалом. Распознай ВСЕ слова песни от начала до конца. Дай дословную ПОЛНУЮ транскрипцию без перевода и перефразирования. Сохраняй язык оригинала, не интерпретируй, не сокращай. Внимательно слушай начало песни - там тоже есть слова. Если есть повторяющийся припев - распознай ВСЕ повторения полностью. Если это инструментальная музыка без слов - верни пустую строку. ВАЖНО: Распознай весь текст песни, включая все куплеты и припевы. Не останавливайся на первом фрагменте - слушай до конца.', 'response_format': 'text'}}
2025-09-25 22:52:39,164 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/audio/transcriptions
2025-09-25 22:52:39,164 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-25 22:52:39,164 - DEBUG - send_request_headers.complete
2025-09-25 22:52:39,164 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-25 22:52:39,170 - DEBUG - send_request_body.complete
2025-09-25 22:52:39,170 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-25 22:52:43,484 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 25 Sep 2025 19:52:43 GMT'), (b'Content-Type', b'text/plain; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'yurisun'), (b'openai-processing-ms', b'1169'), (b'openai-project', b'proj_Llb21yVk5b2whxj0ZTkY3iYI'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'1185'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_274e8940e95e4ecab1608f77bd93e876'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'984d102d28388dc9-HEL'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-25 22:52:43,485 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-09-25 22:52:43,485 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-25 22:52:43,486 - DEBUG - receive_response_body.complete
2025-09-25 22:52:43,486 - DEBUG - response_closed.started
2025-09-25 22:52:43,486 - DEBUG - response_closed.complete
2025-09-25 22:52:43,486 - DEBUG - HTTP Response: POST https://api.openai.com/v1/audio/transcriptions "200 OK" Headers({'date': 'Thu, 25 Sep 2025 19:52:43 GMT', 'content-type': 'text/plain; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'yurisun', 'openai-processing-ms': '1169', 'openai-project': 'proj_Llb21yVk5b2whxj0ZTkY3iYI', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '1185', 'x-ratelimit-limit-requests': '500', 'x-ratelimit-remaining-requests': '499', 'x-ratelimit-reset-requests': '120ms', 'x-request-id': 'req_274e8940e95e4ecab1608f77bd93e876', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '984d102d28388dc9-HEL', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-09-25 22:52:43,487 - DEBUG - request_id: req_274e8940e95e4ecab1608f77bd93e876
2025-09-25 22:52:43,487 - DEBUG - ФИЛЬТРАЦИЯ: Входной текст: 'Настрою играется музыка, мы группа названьим любовью.'
2025-09-25 22:52:43,487 - DEBUG - ФИЛЬТРАЦИЯ: Промпт: 'Это музыкальная композиция с вокалом. Распознай ВСЕ слова песни от начала до конца. Дай дословную ПОЛНУЮ транскрипцию без перевода и перефразирования. Сохраняй язык оригинала, не интерпретируй, не сокращай. Внимательно слушай начало песни - там тоже есть слова. Если есть повторяющийся припев - распознай ВСЕ повторения полностью. Если это инструментальная музыка без слов - верни пустую строку. ВАЖНО: Распознай весь текст песни, включая все куплеты и припевы. Не останавливайся на первом фрагменте - слушай до конца.'
2025-09-25 22:52:43,487 - DEBUG - ФИЛЬТРАЦИЯ: Текст прошел фильтрацию: 'Настрою играется музыка, мы группа названьим любовью.'
2025-09-25 22:52:43,488 - DEBUG - ТРАНСКРИПЦИЯ: Результат музыкального промпта: 'Настрою играется музыка, мы группа названьим любовью.' (длина: 53)
2025-09-25 22:52:43,488 - DEBUG - ТРАНСКРИПЦИЯ: Выбран результат музыкального промпта
2025-09-25 22:52:43,488 - DEBUG - ТРАНСКРИПЦИЯ: Попытка 5 - английский язык с музыкальным промптом
2025-09-25 22:52:43,489 - DEBUG - Request options: {'method': 'post', 'url': '/audio/transcriptions', 'headers': {'Content-Type': 'multipart/form-data'}, 'files': [('file', SerializationIterator(index=0, iterator=SerializationIterator(index=0, iterator=<_io.BufferedReader name='examples\\ЛЮБОВЬ.mp3'>)))], 'idempotency_key': 'stainless-python-retry-496ade68-a301-4fb3-8a57-fd516a384434', 'json_data': {'model': 'gpt-4o-transcribe', 'language': 'en', 'prompt': 'Это музыкальная композиция с вокалом. Распознай ВСЕ слова песни от начала до конца. Дай дословную ПОЛНУЮ транскрипцию без перевода и перефразирования. Сохраняй язык оригинала, не интерпретируй, не сокращай. Внимательно слушай начало песни - там тоже есть слова. Если есть повторяющийся припев - распознай ВСЕ повторения полностью. Если это инструментальная музыка без слов - верни пустую строку. ВАЖНО: Распознай весь текст песни, включая все куплеты и припевы. Не останавливайся на первом фрагменте - слушай до конца.', 'response_format': 'text'}}
2025-09-25 22:52:43,489 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/audio/transcriptions
2025-09-25 22:52:43,490 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-25 22:52:43,490 - DEBUG - send_request_headers.complete
2025-09-25 22:52:43,490 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-25 22:52:43,496 - DEBUG - send_request_body.complete
2025-09-25 22:52:43,496 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-25 22:52:49,493 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 25 Sep 2025 19:52:49 GMT'), (b'Content-Type', b'text/plain; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'yurisun'), (b'openai-processing-ms', b'3233'), (b'openai-project', b'proj_Llb21yVk5b2whxj0ZTkY3iYI'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'3297'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_92ce0ad932504c22ab854793d007aaf0'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'984d10482bed8dc9-HEL'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-25 22:52:49,494 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-09-25 22:52:49,494 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-25 22:52:49,494 - DEBUG - receive_response_body.complete
2025-09-25 22:52:49,495 - DEBUG - response_closed.started
2025-09-25 22:52:49,495 - DEBUG - response_closed.complete
2025-09-25 22:52:49,495 - DEBUG - HTTP Response: POST https://api.openai.com/v1/audio/transcriptions "200 OK" Headers({'date': 'Thu, 25 Sep 2025 19:52:49 GMT', 'content-type': 'text/plain; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'yurisun', 'openai-processing-ms': '3233', 'openai-project': 'proj_Llb21yVk5b2whxj0ZTkY3iYI', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '3297', 'x-ratelimit-limit-requests': '500', 'x-ratelimit-remaining-requests': '499', 'x-ratelimit-reset-requests': '120ms', 'x-request-id': 'req_92ce0ad932504c22ab854793d007aaf0', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '984d10482bed8dc9-HEL', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-09-25 22:52:49,495 - DEBUG - request_id: req_92ce0ad932504c22ab854793d007aaf0
2025-09-25 22:52:49,495 - DEBUG - ФИЛЬТРАЦИЯ: Входной текст: 'Настала играться можно, мы группа названия люблю.'
2025-09-25 22:52:49,495 - DEBUG - ФИЛЬТРАЦИЯ: Промпт: 'Это музыкальная композиция с вокалом. Распознай ВСЕ слова песни от начала до конца. Дай дословную ПОЛНУЮ транскрипцию без перевода и перефразирования. Сохраняй язык оригинала, не интерпретируй, не сокращай. Внимательно слушай начало песни - там тоже есть слова. Если есть повторяющийся припев - распознай ВСЕ повторения полностью. Если это инструментальная музыка без слов - верни пустую строку. ВАЖНО: Распознай весь текст песни, включая все куплеты и припевы. Не останавливайся на первом фрагменте - слушай до конца.'
2025-09-25 22:52:49,496 - DEBUG - ФИЛЬТРАЦИЯ: Текст прошел фильтрацию: 'Настала играться можно, мы группа названия люблю.'
2025-09-25 22:52:49,496 - DEBUG - ТРАНСКРИПЦИЯ: Результат английского музыкального промпта: 'Настала играться можно, мы группа названия люблю.' (длина: 49)
2025-09-25 22:52:49,496 - DEBUG - ФИЛЬТРАЦИЯ: Входной текст: 'Настрою играется музыка, мы группа названьим любовью.'
2025-09-25 22:52:49,496 - DEBUG - ФИЛЬТРАЦИЯ: Промпт: 'Дай дословную ПОЛНУЮ транскрипцию без перевода и перефразирования. Сохраняй язык оригинала, не смешивай языки. Не интерпретируй смысл, не сокращай, не исправляй. Если часть неразборчива — оставь как есть или пропусти без домыслов. ВНИМАНИЕ: Если это музыка с повторяющимся припевом - распознай ВСЕ повторения. Если это плач ребенка или нечеловеческие звуки - НЕ придумывай слова, верни пустую строку.'
2025-09-25 22:52:49,496 - DEBUG - ФИЛЬТРАЦИЯ: Текст прошел фильтрацию: 'Настрою играется музыка, мы группа названьим любовью.'
2025-09-25 22:52:49,497 - DEBUG - Request options: {'method': 'post', 'url': '/audio/transcriptions', 'headers': {'Content-Type': 'multipart/form-data'}, 'files': [('file', SerializationIterator(index=0, iterator=SerializationIterator(index=0, iterator=<_io.BufferedReader name='examples\\ЛЮБОВЬ.mp3'>)))], 'idempotency_key': 'stainless-python-retry-5d30661e-3774-43d1-8dc0-ce6621b45b27', 'json_data': {'model': 'gpt-4o-transcribe', 'language': 'ru', 'prompt': 'Дай дословную ПОЛНУЮ транскрипцию без перевода и перефразирования. Сохраняй язык оригинала, не смешивай языки. Не интерпретируй смысл, не сокращай, не исправляй. Если часть неразборчива — оставь как есть или пропусти без домыслов. ВНИМАНИЕ: Если это музыка с повторяющимся припевом - распознай ВСЕ повторения. Если это плач ребенка или нечеловеческие звуки - НЕ придумывай слова, верни пустую строку.', 'response_format': 'text'}}
2025-09-25 22:52:49,497 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/audio/transcriptions
2025-09-25 22:52:49,498 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-25 22:52:49,498 - DEBUG - send_request_headers.complete
2025-09-25 22:52:49,498 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-25 22:52:49,504 - DEBUG - send_request_body.complete
2025-09-25 22:52:49,504 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-25 22:52:54,630 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 25 Sep 2025 19:52:54 GMT'), (b'Content-Type', b'text/plain; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'yurisun'), (b'openai-processing-ms', b'2266'), (b'openai-project', b'proj_Llb21yVk5b2whxj0ZTkY3iYI'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'2301'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-request-id', b'req_d98c10b535f94e609366efac47955f29'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'984d106dbba48dc9-HEL'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-25 22:52:54,630 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-09-25 22:52:54,630 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-25 22:52:54,631 - DEBUG - receive_response_body.complete
2025-09-25 22:52:54,631 - DEBUG - response_closed.started
2025-09-25 22:52:54,631 - DEBUG - response_closed.complete
2025-09-25 22:52:54,631 - DEBUG - HTTP Response: POST https://api.openai.com/v1/audio/transcriptions "200 OK" Headers({'date': 'Thu, 25 Sep 2025 19:52:54 GMT', 'content-type': 'text/plain; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'yurisun', 'openai-processing-ms': '2266', 'openai-project': 'proj_Llb21yVk5b2whxj0ZTkY3iYI', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '2301', 'x-ratelimit-limit-requests': '500', 'x-ratelimit-remaining-requests': '499', 'x-ratelimit-reset-requests': '120ms', 'x-request-id': 'req_d98c10b535f94e609366efac47955f29', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '984d106dbba48dc9-HEL', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-09-25 22:52:54,632 - DEBUG - request_id: req_d98c10b535f94e609366efac47955f29
2025-09-25 22:52:54,632 - DEBUG - ФИЛЬТРАЦИЯ: Входной текст: 'На снова играется музыка, мы грубо нажимаем любовь.
На снова играется музыка, мы грубо нажимаем любовь.
На снова играется музыка, мы грубо нажимаем любовь.
На снова играется музыка, мы грубо нажимаем любовь.'
2025-09-25 22:52:54,632 - DEBUG - ФИЛЬТРАЦИЯ: Промпт: 'Дай дословную ПОЛНУЮ транскрипцию без перевода и перефразирования. Сохраняй язык оригинала, не смешивай языки. Не интерпретируй смысл, не сокращай, не исправляй. Если часть неразборчива — оставь как есть или пропусти без домыслов. ВНИМАНИЕ: Если это музыка с повторяющимся припевом - распознай ВСЕ повторения. Если это плач ребенка или нечеловеческие звуки - НЕ придумывай слова, верни пустую строку.'
2025-09-25 22:52:54,633 - DEBUG - ФИЛЬТРАЦИЯ: Текст прошел фильтрацию: 'На снова играется музыка, мы грубо нажимаем любовь.
На снова играется музыка, мы грубо нажимаем любовь.
На снова играется музыка, мы грубо нажимаем любовь.
На снова играется музыка, мы грубо нажимаем любовь.'
2025-09-25 22:52:54,635 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-1ebd845c-e926-4880-a3f6-21395807a09f', 'json_data': {'messages': [{'role': 'system', 'content': 'Ты — специализированная система для анализа аудиозаписей.\nТвоя единственная задача — классифицировать входной аудиофайл в одну из категорий: музыка, речь, шум.\n\nВАЖНО: Ты анализируешь РЕЗУЛЬТАТ ТРАНСКРИПЦИИ аудиофайла, а не сам аудиофайл. Это означает, что:\n- Если в аудио была музыка с вокалом, то в транскрипции будут слова песни\n- Если в аудио была речь, то в транскрипции будет связный текст\n- Если в аудио был шум, то в транскрипции будет мало слов или галлюцинации\n\nКатегории классификации:\n\nМузыка (music):\n- Это песня, музыкальная композиция с вокалом\n- Характерные признаки в транскрипции:\n  * Повторяющиеся фразы или слова (припев)\n  * Рифмы и ритмические паттерны\n  * Музыкальные звуки: "ла-ла-ла", "на-на-на", "о-о-о", "а-а-а"\n  * Эмоциональные восклицания: "Ауф!", "Ой!", "Ах!"\n  * Короткие фразы без логической связи\n  * Слова, которые звучат как песня, а не как обычная речь\n  * Повторяющиеся слова или фразы (припев песни)\n  * Ритмические паттерны в тексте\n\nРечь (speech):\n- Это обычная речь, разговор, диалог\n- Характерные признаки в транскрипции:\n  * Связные предложения с логической структурой\n  * Обычные слова и фразы\n  * Знаки препинания: точки, запятые, восклицательные знаки\n  * Логическая последовательность мыслей\n  * Отсутствие повторяющихся музыкальных паттернов\n  * Естественная речь без ритма\n\nШум (noise):\n- Это неречевые звуки, шум, техника, плач ребенка\n- Характерные признаки в транскрипции:\n  * Очень короткие или бессмысленные фрагменты\n  * Отсутствие связной речи\n  * Случайные слова или звуки\n  * Описания звуков: "[Music]", "[звук]", "[шум]"\n  * Повторяющиеся гласные: "ааа", "ууу", "ооо" (детский плач)\n  * Бессмысленные фразы: "Всем новичкам, всем новичкам"\n  * Короткие бессвязные слова\n\nПравила классификации:\n1. Если транскрипция содержит связную речь с логической структурой → speech\n2. Если транскрипция содержит повторяющиеся фразы, рифмы, музыкальные звуки → music\n3. Если транскрипция короткая, бессвязная или содержит описания звуков → noise\n4. При сомнениях между music и speech: если есть повторения или музыкальные звуки → music\n5. Детский плач (ааа, ууу, ооо) → noise\n6. Белый шум с бессмысленными словами → noise\n\nВАЖНЫЕ ПРИМЕРЫ:\n- "Скажи мне, не говори мне, что ты гонишь" → music (песня с повторениями)\n- "Привет, как дела?" → speech (обычная речь)\n- "Ааааааа" → noise (детский плач)\n- "Всем новичкам, всем новичкам" → noise (белый шум)\n- "Find me, find me, You can find" → music (песня с припевом)\n\nФормат ответа:\nОтвечай только в формате JSON, без лишнего текста:\n{\n  "classification": "music | speech | noise",\n  "confidence": 0.0-1.0,\n  "reasoning": "Краткое объяснение выбора: какие признаки были решающими"\n}\n\nОграничения:\n- Не добавляй ничего, кроме JSON\n- Не предлагай альтернативных категорий\n- Всегда возвращай одно значение в поле "classification"\n- Уровень уверенности (confidence) должен отражать баланс признаков:\n  * 0.9–1.0 → очень высокая уверенность\n  * 0.6–0.89 → умеренная уверенность\n  * <0.6 → низкая уверенность, признаки неоднозначны'}, {'role': 'user', 'content': 'Проанализируй следующий транскрипт аудио и классифицируй его:\n\nНа снова играется музыка, мы грубо нажимаем любовь.\nНа снова играется музыка, мы грубо нажимаем любовь.\nНа снова играется музыка, мы грубо нажимаем любовь.\nНа снова играется музыка, мы грубо нажимаем любовь.'}], 'model': 'gpt-4o-mini', 'max_tokens': 200, 'temperature': 0.1}}
2025-09-25 22:52:54,636 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-09-25 22:52:54,636 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-25 22:52:54,636 - DEBUG - send_request_headers.complete
2025-09-25 22:52:54,637 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-25 22:52:54,637 - DEBUG - send_request_body.complete
2025-09-25 22:52:54,637 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-25 22:52:55,724 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 25 Sep 2025 19:52:55 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'yurisun'), (b'openai-processing-ms', b'758'), (b'openai-project', b'proj_Llb21yVk5b2whxj0ZTkY3iYI'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'795'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'198597'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'420ms'), (b'x-request-id', b'req_815cb8234c87406186223d351ecca990'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'984d108ddf5d8dc9-HEL'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-09-25 22:52:55,725 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 22:52:55,725 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-25 22:52:55,735 - DEBUG - receive_response_body.complete
2025-09-25 22:52:55,736 - DEBUG - response_closed.started
2025-09-25 22:52:55,736 - DEBUG - response_closed.complete
2025-09-25 22:52:55,736 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Thu, 25 Sep 2025 19:52:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'yurisun', 'openai-processing-ms': '758', 'openai-project': 'proj_Llb21yVk5b2whxj0ZTkY3iYI', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '795', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '200000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '198597', 'x-ratelimit-reset-requests': '8.64s', 'x-ratelimit-reset-tokens': '420ms', 'x-request-id': 'req_815cb8234c87406186223d351ecca990', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '984d108ddf5d8dc9-HEL', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2025-09-25 22:52:55,737 - DEBUG - request_id: req_815cb8234c87406186223d351ecca990
